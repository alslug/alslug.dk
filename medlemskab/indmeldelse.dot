digraph indmeldelse {
  { # Dine handlinger
    node [ shape=box style=filled fillcolor=yellow ];
    indtast                [label="Du indtaster\ndine informationer\nher på siden"];
    confirm_email          [label="Du bekræfter din email\nved at klikke på linket\ni den tilsendte mail\n\nHusk at checke dit spam-filter"];
    confirm_sms            [label="Du reagerer på SMS'en"];
  }
  send_tilmelding        [shape=folder label="Data gemmes krypteret\npå serveren\n\nINGEN kan se dine informatiner før\ndu bekræfter din email.\n\n(Sikring mod robot-tilmeldinger)"];
  { # Server-aktiviteter
    node [shape=component];
    server_sender_ny_email [label="Serveren sender\nen mail til dig hvor\ndu skal bekræfte\ndin tilmelding."];
    server_sender_sms      [label="Serveren sender\nen SMS til dit\nmobil-nummer"];
  }

  findes_allerede        [shape=diamond                                 label="Kender vi\nallerde email\nog/eller eller\nmobil-nummer?"];
  du_biver_medlem        [shape=hexagon   style=filled fillcolor=green  label="Du er nu blevet medlem"];
  
  indtast -> send_tilmelding -> findes_allerede;
                                findes_allerede -> server_sender_ny_email [label="Nej"];  server_sender_ny_email -> confirm_email -> du_biver_medlem -> server_sender_sms -> confirm_sms;
                                findes_allerede -> both_found             [label="Ja"];   both_found -> samme_member        [label="Ja"];                      samme_member -> already_member_email;
                                                                                          both_found -> add_mobil_to_member [label="Tilføj mobil til medlem"];
                                                                                          both_found -> add_email_to_member [label="Tilføj email til medlem"];
                                                                                          both_found -> different_member    [label="Forskellige"];             different_member -> different_member_email;
}
